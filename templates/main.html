<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <title>Open Port 모니터</title>
    <style>
      body {
        font-family: ui-sans-serif, system-ui, -apple-system;
        max-width: 960px;
        margin: 32px auto;
      }
      h1 {
        margin-bottom: 8px;
      }
      .row {
        display: flex;
        gap: 12px;
        margin: 16px 0;
      }
      button {
        padding: 10px 16px;
        font-size: 14px;
        cursor: pointer;
      }
      pre {
        background: #f6f8fa;
        padding: 12px;
        border-radius: 6px;
        overflow-x: auto;
      }
      .card {
        border: 1px solid #e5e7eb;
        border-radius: 8px;
        padding: 16px;
        margin-top: 16px;
      }
      .muted {
        color: #6b7280;
        font-size: 13px;
      }
    </style>
  </head>
  <body>
    <h1>🔎 Open Port 모니터</h1>
    <p class="muted">
      시작: Shodan 검색 → MongoDB 저장 | 조회: 현재 요약 보고 미리보기 | 전송:
      Slack & Email 발송
    </p>

    <div class="row">
      <form method="post" action="{{ url_for('start') }}">
        <button type="submit">▶ 시작 (KR·모든 포트 한 사이클)</button>
      </form>
      <form method="get" action="{{ url_for('preview') }}">
        <button type="submit">👁️ 조회 (미리보기)</button>
      </form>
      <form method="post" action="{{ url_for('send_now') }}">
        <button type="submit">📤 전송 (Slack + Email)</button>
      </form>
    </div>

    {% if logs %}
    <div class="card">
      <h3>실행 로그</h3>
      <pre>{{ '\n'.join(logs) }}</pre>
    </div>
    {% endif %} {% if preview %}
    <div class="card">
      <h3>전송 미리보기</h3>
      <pre>{{ preview }}</pre>
    </div>
    {% endif %}
  </body>
</html>
